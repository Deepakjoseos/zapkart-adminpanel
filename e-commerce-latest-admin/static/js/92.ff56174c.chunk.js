(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{753:function(e,t,a){"use strict";a.d(t,"d",function(){return i}),a.d(t,"c",function(){return d}),a.d(t,"a",function(){return m}),a.d(t,"b",function(){return f});var n=a(3),r=a.n(n),o=(a(99),a(32)),c=a(31),s=a(71),u=a(6),l=u.g.getAttributes;function i(e){return p.apply(this,arguments)}function p(){return(p=Object(c.a)(r.a.mark(function e(t){var a,n,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(l,"?").concat(t),n={headers:{"Content-Type":"application/json"}},e.prev=2,e.next=5,Object(s.a)(a,n);case 5:if(c=e.sent,console.log("response",c),!c||!c.data){e.next=9;break}return e.abrupt("return",{data:c.data,count:c.count});case 9:e.next=16;break;case 11:e.prev=11,e.t0=e.catch(2),console.log("hi",e.t0),o.a.error({message:"Error!",description:e.t0.message}),console.error(e.t0);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}},e,null,[[2,11]])}))).apply(this,arguments)}var d=function(){var e=Object(c.a)(r.a.mark(function e(t,a){var n,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(l,"/").concat(t),c={method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify(a)},e.prev=2,e.next=5,Object(s.a)(n,c);case 5:if(!e.sent.data){e.next=8;break}return e.abrupt("return",!0);case 8:return e.abrupt("return",!1);case 11:return e.prev=11,e.t0=e.catch(2),o.a.error({message:"Error!",description:e.t0.message}),e.abrupt("return",!1);case 15:case"end":return e.stop()}},e,null,[[2,11]])}));return function(t,a){return e.apply(this,arguments)}}();function m(e){return b.apply(this,arguments)}function b(){return(b=Object(c.a)(r.a.mark(function e(t){var a,n,c,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(l),n=JSON.stringify(t),console.log(n),c={method:"POST",headers:{"Content-Type":"application/json"},body:n},e.prev=4,e.next=7,Object(s.a)(a,c);case 7:if(!(i=e.sent)||!i.data){e.next=10;break}return e.abrupt("return",i.data);case 10:e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),console.error(e.t0),o.a.error({message:u.w.error,description:e.t0.message});case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}},e,null,[[4,12]])}))).apply(this,arguments)}function f(e){return v.apply(this,arguments)}function v(){return(v=Object(c.a)(r.a.mark(function e(t){var a,n,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("hi"),a="".concat(l,"/").concat(t),n={method:"DELETE"},e.next=6,Object(s.a)(a,n);case 6:if(c=e.sent,console.log(c),!c){e.next=10;break}return e.abrupt("return",!0);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),o.a.error({message:"Error!",description:e.t0.message});case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}},e,null,[[0,12]])}))).apply(this,arguments)}},856:function(e,t,a){e.exports={thumbnail:"style_thumbnail__DdS57",attributesGroup:"style_attributesGroup__1U29c"}},977:function(e,t,a){"use strict";a.r(t);a(224);var n,r=a(98),o=(a(473),a(468)),c=(a(784),a(785)),s=(a(447),a(27)),u=(a(481),a(525)),l=(a(580),a(581)),i=a(37),p=a(64),d=a(3),m=a.n(d),b=(a(99),a(32)),f=a(31),v=a(484),h=a(14),g=a(15),E=a(17),y=a(16),A=a(18),j=(a(588),a(591)),k=a(0),O=a.n(k),w=a(878),S=a.n(w),_=a(410),C=a(100),x=a(76),N=a.n(x),D=a(753),T=a(6),I=a(856),H=a.n(I),J=j.a.Item,U=j.a.create()(n=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(E.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(r)))).abortController=new AbortController,a.state={sendSuccess:!1,data:"",attribute_group_code:"",name:"",status:"Active",loading:!1,options:[]},a.handleDelete=function(e){console.log(e);var t=a.state.options.filter(function(t){return t._id!==e});a.setState({options:Object(v.a)(t)})},a.handleAddAttribute=function(e){console.log("in handleAddAttribute"),console.log(e),console.log(e.target.value);var t=a.state.options,n={value:"",_id:S.a.generate()};a.setState({options:[].concat(Object(v.a)(t),[n])})},a.sendEditAttribute=function(){var e=Object(f.a)(m.a.mark(function e(t){var n,r,o,c,s;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.options,r=t.status,o=t.name,c=n.map(function(e){return e.value}),s={status:r,name:o,options:N.a.uniq(c)},e.next=5,Object(D.a)(s);case 5:e.sent&&(b.a.success({message:T.w.success,description:T.w.addSuccess}),a.setState({sendSuccess:!0}));case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.handleReset=function(){console.log("resetting"),a.setState({name:"",status:"Hold",attribute_group_code:"",options:[],loading:!1})},a.handleSubmit=function(e){e.preventDefault(),console.log("will submit form");var t=a.state,n={name:t.name,status:t.status,attribute_group_code:t.attribute_group_code,options:t.options};console.log(n),a.sendEditAttribute(n)},a.onStatusChange=function(){console.log("changing status"),a.setState(function(e){return{status:"Active"===e.status?"Hold":"Active"}})},a.onChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(p.a)({},n,r))},a.onAttributeValChange=function(e,t){e.preventDefault();var n=e.target.value;console.log(n),a.setState(function(e){console.log(e);var a=Object(v.a)(e.options),r=a.findIndex(function(e){return e._id===t});if(-1!==r)return a[r].value=n,Object(i.a)({},e,{options:Object(v.a)(a)});var o={_id:S.a.generate(),value:n};return a.push(o),Object(i.a)({},e,{options:Object(v.a)(a)})})},a}return Object(A.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){console.log("HI ADD ATTRIBUTE")}},{key:"componentWillUnmount",value:function(){this.abortController.abort()}},{key:"render",value:function(){var e=this;console.log(this.state);var t=this.state,a=t.loading,n=t.options,i=t.status,p=t.name,d=t.sendSuccess;return console.log(a),d?O.a.createElement(_.a,{to:"/catalog/attributes"}):O.a.createElement("div",null,O.a.createElement(C.Helmet,{title:"Add Attribute group"}),O.a.createElement("div",{className:"card"},O.a.createElement("div",{className:"card-header"},O.a.createElement("div",{className:"utils__title"},O.a.createElement("strong",null,"Add Attribute group"))),a&&O.a.createElement("div",{className:"card-body"},O.a.createElement(l.a,{active:!0})),!a&&O.a.createElement("div",{className:"card-body"},O.a.createElement(j.a,{onSubmit:this.handleSubmit,layout:"vertical"},O.a.createElement("div",{className:"column"},O.a.createElement("div",{className:"row"},O.a.createElement("div",{className:"col-lg-4"},O.a.createElement(J,{label:"Attribute group"},O.a.createElement(u.a,{value:p,name:"name",placeholder:"Attribute group",onChange:this.onChange}))),O.a.createElement("div",{className:"col-lg-4"},O.a.createElement(J,{label:"Status"},O.a.createElement(c.a,{onChange:this.onStatusChange,checked:"Active"===i,checkedChildren:O.a.createElement(s.a,{type:"check"}),unCheckedChildren:O.a.createElement(s.a,{type:"close"})})))),O.a.createElement("div",null,O.a.createElement("div",{className:"form-group"},O.a.createElement(J,{label:"Attribute group options"},O.a.createElement("div",{className:H.a.attributesGroup},n.map(function(t,a){var n=t._id;return O.a.createElement("div",{key:n},O.a.createElement(u.a,{onChange:function(r){return e.onAttributeValChange(r,t._id,n,a)},key:n,addonAfter:O.a.createElement(o.a,{key:n,title:"Sure to delete?",onConfirm:function(){return e.handleDelete(t._id)}},O.a.createElement(s.a,{key:n,type:"close",style:{color:"#df071a"}})),defaultValue:t.value}))}),O.a.createElement("div",null,O.a.createElement(r.a,{onClick:this.handleAddAttribute,shape:"circle",icon:"plus"}))))),O.a.createElement(j.a.Item,{wrapperCol:{span:12,offset:0}},O.a.createElement(r.a,{type:"primary",htmlType:"submit",className:"btn-margins"},"Save"))))))))}}]),t}(O.a.Component))||n;t.default=U}}]);
//# sourceMappingURL=92.ff56174c.chunk.js.map