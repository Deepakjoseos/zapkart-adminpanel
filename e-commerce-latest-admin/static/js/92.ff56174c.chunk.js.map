{"version":3,"sources":["services/attributes.js","pages/catalog/attributes/style.module.scss","pages/catalog/attributes/attributes-add/index.js"],"names":["ATTRIBUTES_URL","CATALOG_API_URL","getAttributes","_x","_getAttributes","apply","this","arguments","_callee2","filters","url","options","response","C_Users_hashir_OneDrive_Desktop_new_projects_Emmerce_adminpanel_ecommerce_admin_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","a","wrap","_context2","prev","next","concat","headers","Content-Type","callApi","sent","console","log","data","abrupt","count","t0","antd_es_notification__WEBPACK_IMPORTED_MODULE_2__","error","message","description","stop","editAttribute","_ref","Object","C_Users_hashir_OneDrive_Desktop_new_projects_Emmerce_adminpanel_ecommerce_admin_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__","mark","_callee","id","values","_context","method","Content-type","body","JSON","stringify","_x2","_x3","addAttribute","_x4","_addAttribute","_callee3","json","res","_context3","STRINGS","deleteAttribute","_x5","_deleteAttribute","_callee4","_context4","module","exports","thumbnail","attributesGroup","FormItem","antd_es_form__WEBPACK_IMPORTED_MODULE_25__","Item","AttributesAdd","create","abortController","AbortController","state","sendSuccess","attribute_group_code","name","status","loading","handleDelete","arr","_this","filter","item","_id","setState","C_Users_hashir_OneDrive_Desktop_new_projects_Emmerce_adminpanel_ecommerce_admin_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_18__","handleAddAttribute","e","target","value","shortid","generate","sendEditAttribute","optionsArray","sendData","C_Users_hashir_OneDrive_Desktop_new_projects_Emmerce_adminpanel_ecommerce_admin_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_14___default","map","_","uniq","antd_es_notification__WEBPACK_IMPORTED_MODULE_16__","success","addSuccess","handleReset","handleSubmit","preventDefault","_this$state","onStatusChange","prevState","onChange","_e$target","C_Users_hashir_OneDrive_Desktop_new_projects_Emmerce_adminpanel_ecommerce_admin_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_13__","onAttributeValChange","typedInValue","updatedoptions","findIndex","x","C_Users_hashir_OneDrive_Desktop_new_projects_Emmerce_adminpanel_ecommerce_admin_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_12__","newObj","push","abort","_this2","_this$state2","react__WEBPACK_IMPORTED_MODULE_26___default","createElement","react_router_dom__WEBPACK_IMPORTED_MODULE_28__","to","react_helmet__WEBPACK_IMPORTED_MODULE_29__","title","className","antd_es_skeleton__WEBPACK_IMPORTED_MODULE_11__","active","onSubmit","layout","label","antd_es_input__WEBPACK_IMPORTED_MODULE_9__","placeholder","antd_es_switch__WEBPACK_IMPORTED_MODULE_5__","checked","checkedChildren","antd_es_icon__WEBPACK_IMPORTED_MODULE_7__","type","unCheckedChildren","styles","index","key","addonAfter","antd_es_popconfirm__WEBPACK_IMPORTED_MODULE_3__","onConfirm","style","color","defaultValue","antd_es_button__WEBPACK_IMPORTED_MODULE_1__","onClick","shape","icon","wrapperCol","span","offset","htmlType","React","Component"],"mappings":"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","file":"static/js/92.ff56174c.chunk.js","sourcesContent":["/* eslint-disable import/prefer-default-export */\r\nimport callApi from 'utils/callApi'\r\nimport { notification } from 'antd'\r\nimport { STRINGS, CATALOG_API_URL } from '_constants'\r\n\r\nconst ATTRIBUTES_URL = CATALOG_API_URL.getAttributes\r\n\r\n// export async function getAttributeGroups() {\r\n// const response = await fetch()\r\n// }\r\n\r\n// cache? -- unsafe\r\n// let cacheAttrGrps = null;\r\n\r\n// const ATTRIBUTES_GROUPS_URL = 'http://localhost:3002/api/attributesGroup'\r\nexport async function getAttributes(filters) {\r\n  const url = `${ATTRIBUTES_URL}?${filters}`\r\n  const options = {\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n  }\r\n  try {\r\n    const response = await callApi(url, options)\r\n    console.log('response', response)\r\n    if (response && response.data) return { data: response.data, count: response.count }\r\n  } catch (error) {\r\n    console.log('hi', error)\r\n    notification.error({\r\n      message: 'Error!',\r\n      description: error.message,\r\n    })\r\n    console.error(error)\r\n  }\r\n  return null\r\n}\r\n\r\nexport const editAttribute = async (id, values) => {\r\n  const url = `${ATTRIBUTES_URL}/${id}`\r\n  const options = {\r\n    method: 'PUT',\r\n    headers: {\r\n      'Content-type': 'application/json',\r\n    },\r\n    body: JSON.stringify(values),\r\n  }\r\n  try {\r\n    const res = await callApi(url, options)\r\n    if (res.data) return true\r\n    return false\r\n  } catch (error) {\r\n    notification.error({\r\n      message: 'Error!',\r\n      description: error.message,\r\n    })\r\n    return false\r\n  }\r\n}\r\n\r\nexport async function addAttribute(values) {\r\n  const url = `${ATTRIBUTES_URL}`\r\n  const json = JSON.stringify(values)\r\n  console.log(json)\r\n  const options = {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: json,\r\n  }\r\n  try {\r\n    const res = await callApi(url, options)\r\n    if (res && res.data) return res.data\r\n  } catch (error) {\r\n    console.error(error)\r\n    notification.error({\r\n      message: STRINGS.error,\r\n      description: error.message,\r\n    })\r\n  }\r\n  return null\r\n}\r\n\r\nexport async function deleteAttribute(id) {\r\n  try {\r\n    console.log('hi')\r\n    const url = `${ATTRIBUTES_URL}/${id}`\r\n    const options = {\r\n      method: 'DELETE',\r\n    }\r\n    const response = await callApi(url, options)\r\n    console.log(response)\r\n    if (response) return true\r\n  } catch (error) {\r\n    notification.error({\r\n      // TODO: abstract as component/ function\r\n      message: 'Error!',\r\n      description: error.message,\r\n    })\r\n  }\r\n  return false\r\n}\r\n\r\n// -------------------------\r\n\r\n// export async function getAttributeGroup(id) {\r\n//   const url = `${ATTRIBUTES_URL}/${id}`\r\n//   try {\r\n//     const response = await callApi(url)\r\n//     console.log('response', response)\r\n//     if (response && response.data) return response.data\r\n//   } catch (error) {\r\n//     console.log('hi')\r\n//     console.error('yep', error)\r\n//     notification.error({\r\n//       message: 'Error!',\r\n//       description: error.message,\r\n//     })\r\n//     return null\r\n//   }\r\n//   return null\r\n// }\r\n\r\n// export async function editAttrGrpStatus(id, status) {\r\n//   const url = `${ATTRIBUTES_URL}/${id}?status=${status}`\r\n//   const options = {\r\n//     method: 'PATCH',\r\n//   }\r\n//   try {\r\n//     const res = await callApi(url, options)\r\n//     if (res.data && res.data.status === status) return true\r\n//     return false\r\n//   } catch (error) {\r\n//     notification.error({\r\n//       message: 'Error!',\r\n//       description: error.message,\r\n//     })\r\n//     return false\r\n//   }\r\n// }\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"thumbnail\":\"style_thumbnail__DdS57\",\"attributesGroup\":\"style_attributesGroup__1U29c\"};","/* eslint-disable no-underscore-dangle */\r\nimport React from 'react'\r\nimport {\r\n  Input,\r\n  Form,\r\n  // Checkbox,\r\n  Switch,\r\n  Icon,\r\n  Button,\r\n  Skeleton,\r\n  // Row,\r\n  // Col,\r\n  Popconfirm,\r\n  notification,\r\n} from 'antd'\r\n// import Skeleton from 'react-loading-skeleton'\r\n// eslint-disable-next-line no-unused-vars\r\nimport shortid from 'shortid'\r\nimport { Redirect } from 'react-router-dom'\r\nimport { Helmet } from 'react-helmet'\r\n// import dataAtr from '../data.json'\r\nimport _ from 'lodash'\r\nimport { addAttribute } from 'services/attributes'\r\nimport { STRINGS } from '_constants'\r\nimport styles from '../style.module.scss'\r\n\r\n// const { LINKS } = constants\r\n\r\nconst FormItem = Form.Item\r\n// const { TextArea } = Input\r\n\r\n@Form.create()\r\nclass AttributesAdd extends React.Component {\r\n  abortController = new AbortController()\r\n\r\n  state = {\r\n    // records: dataAtr.data,\r\n    // attributesList: [],\r\n    sendSuccess: false,\r\n    data: '',\r\n    attribute_group_code: '',\r\n    name: '',\r\n    status: 'Active',\r\n    loading: false,\r\n    options: [],\r\n  }\r\n\r\n  componentDidMount() {\r\n    console.log('HI ADD ATTRIBUTE')\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.abortController.abort()\r\n  }\r\n\r\n  handleDelete = (id) => {\r\n    console.log(id)\r\n    const { options } = this.state\r\n    const arr = options.filter((item) => item._id !== id)\r\n\r\n    this.setState({\r\n      options: [...arr],\r\n    })\r\n  }\r\n\r\n  handleAddAttribute = (e) => {\r\n    console.log('in handleAddAttribute')\r\n    console.log(e)\r\n    console.log(e.target.value)\r\n    const { options } = this.state\r\n    const newId = shortid.generate()\r\n    const item = {\r\n      value: '',\r\n      _id: newId,\r\n    }\r\n    this.setState({ options: [...options, item] })\r\n  }\r\n\r\n  // eslint-disable-next-line camelcase\r\n  sendEditAttribute = async ({ options, status, name }) => {\r\n    const optionsArray = options.map((item) => item.value)\r\n    const sendData = {\r\n      status,\r\n      name,\r\n      options: _.uniq(optionsArray),\r\n      // options,\r\n    }\r\n    const add = await addAttribute(sendData)\r\n    if (add) {\r\n      notification.success({\r\n        message: STRINGS.success,\r\n        description: STRINGS.addSuccess,\r\n      })\r\n      this.setState({\r\n        sendSuccess: true,\r\n      })\r\n    }\r\n  }\r\n\r\n  handleReset = () => {\r\n    console.log('resetting')\r\n    this.setState({\r\n      name: '',\r\n      status: 'Hold',\r\n      attribute_group_code: '',\r\n      options: [],\r\n      loading: false,\r\n    })\r\n  }\r\n\r\n  handleSubmit = (e) => {\r\n    e.preventDefault()\r\n    console.log('will submit form')\r\n    // eslint-disable-next-line camelcase\r\n    const { name, status, attribute_group_code, options } = this.state\r\n    const data = {\r\n      name,\r\n      status,\r\n      attribute_group_code,\r\n      options,\r\n    }\r\n    console.log(data)\r\n    this.sendEditAttribute(data)\r\n  }\r\n\r\n  onStatusChange = () => {\r\n    console.log('changing status')\r\n    this.setState((prevState) => {\r\n      const status = prevState.status === 'Active' ? 'Hold' : 'Active'\r\n      return { status }\r\n    })\r\n  }\r\n\r\n  onChange = (e) => {\r\n    const { name, value } = e.target\r\n    this.setState({\r\n      [name]: value,\r\n    })\r\n  }\r\n\r\n  onAttributeValChange = (e, id) => {\r\n    e.preventDefault()\r\n    const typedInValue = e.target.value\r\n    console.log(typedInValue)\r\n\r\n    // check record.options index to check edited options\r\n    // on add attr addedoptions check id here\r\n    // on del attr deletedoptions push id there\r\n    this.setState((prevState) => {\r\n      console.log(prevState)\r\n      const updatedoptions = [...prevState.options]\r\n      const findIndex = updatedoptions.findIndex((x) => x._id === id)\r\n      if (findIndex !== -1) {\r\n        updatedoptions[findIndex].value = typedInValue\r\n        return {\r\n          ...prevState,\r\n          options: [...updatedoptions],\r\n        }\r\n      }\r\n      const newId = shortid.generate()\r\n      const newObj = {\r\n        _id: newId,\r\n        value: typedInValue,\r\n      }\r\n      updatedoptions.push(newObj)\r\n      return {\r\n        ...prevState,\r\n        options: [...updatedoptions],\r\n      }\r\n    })\r\n    // }\r\n  }\r\n\r\n  render() {\r\n    console.log(this.state)\r\n\r\n    // eslint-disable-next-line camelcase\r\n    const { loading, options, status, name, sendSuccess } = this.state\r\n\r\n    console.log(loading)\r\n\r\n    if (sendSuccess) return <Redirect to=\"/catalog/attributes\" />\r\n\r\n    return (\r\n      <div>\r\n        <Helmet title=\"Add Attribute group\" />\r\n        <div className=\"card\">\r\n          <div className=\"card-header\">\r\n            <div className=\"utils__title\">\r\n              <strong>Add Attribute group</strong>\r\n            </div>\r\n          </div>\r\n          {loading && (\r\n            <div className=\"card-body\">\r\n              <Skeleton active />\r\n            </div>\r\n          )}\r\n          {!loading && (\r\n            <div className=\"card-body\">\r\n              {/* <h4 className='text-black mb-3'>\r\n              <strong>Basic info</strong>\r\n            </h4> */}\r\n              <Form onSubmit={this.handleSubmit} layout=\"vertical\">\r\n                <div className=\"column\">\r\n                  <div className=\"row\">\r\n                    <div className=\"col-lg-4\">\r\n                      <FormItem label=\"Attribute group\">\r\n                        <Input\r\n                          value={name}\r\n                          name=\"name\"\r\n                          placeholder=\"Attribute group\"\r\n                          onChange={this.onChange}\r\n                        />\r\n                      </FormItem>\r\n                    </div>\r\n                    {/* <div className=\"col-lg-4\">\r\n                      <FormItem label=\"Attribute code\">\r\n                        <Input\r\n                          // eslint-disable-next-line camelcase\r\n                          value={attribute_group_code}\r\n                          name=\"attribute_group_code\"\r\n                          placeholder=\"Attribute code\"\r\n                          onChange={this.onChange}\r\n                        />\r\n                      </FormItem>\r\n                    </div> */}\r\n                    <div className=\"col-lg-4\">\r\n                      <FormItem label=\"Status\">\r\n                        <Switch\r\n                          onChange={this.onStatusChange}\r\n                          checked={status === 'Active'}\r\n                          // disabled={record.status === 'inactive'}\r\n                          checkedChildren={<Icon type=\"check\" />}\r\n                          unCheckedChildren={<Icon type=\"close\" />}\r\n                        />\r\n                      </FormItem>\r\n                    </div>\r\n                  </div>\r\n                  <div>\r\n                    <div className=\"form-group\">\r\n                      <FormItem label=\"Attribute group options\">\r\n                        {/* {form.getFieldDecorator('parentCategory')( */}\r\n                        <div className={styles.attributesGroup}>\r\n                          {options.map((item, index) => {\r\n                            // const key = shortid.generate()\r\n                            const key = item._id\r\n                            // console.log(item)\r\n                            return (\r\n                              <div key={key}>\r\n                                <Input\r\n                                  onChange={(e) =>\r\n                                    this.onAttributeValChange(e, item._id, key, index)\r\n                                  }\r\n                                  key={key}\r\n                                  // autoFocus='true'\r\n                                  addonAfter={\r\n                                    <Popconfirm\r\n                                      key={key}\r\n                                      title=\"Sure to delete?\"\r\n                                      onConfirm={() => this.handleDelete(item._id)}\r\n                                    >\r\n                                      <Icon key={key} type=\"close\" style={{ color: '#df071a' }} />\r\n                                    </Popconfirm>\r\n                                  }\r\n                                  defaultValue={item.value}\r\n                                />\r\n                              </div>\r\n                            )\r\n                          })}\r\n\r\n                          <div>\r\n                            <Button onClick={this.handleAddAttribute} shape=\"circle\" icon=\"plus\" />\r\n                          </div>\r\n                        </div>\r\n                      </FormItem>\r\n                    </div>\r\n\r\n                    <Form.Item wrapperCol={{ span: 12, offset: 0 }}>\r\n                      <Button type=\"primary\" htmlType=\"submit\" className=\"btn-margins\">\r\n                        Save\r\n                      </Button>\r\n                      {/* <Button\r\n                        type=\"ghost\"\r\n                        onClick={() => this.handleReset()}\r\n                        className=\"btn-margins\"\r\n                      >\r\n                        Reset\r\n                      </Button> */}\r\n                    </Form.Item>\r\n                  </div>\r\n                </div>\r\n              </Form>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default AttributesAdd\r\n"],"sourceRoot":""}